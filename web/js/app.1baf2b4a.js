(function(){"use strict";var e={1941:function(e,t,a){var l=a(9242),o=a(3396);function i(e,t){const a=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(a)}var s=a(89);const r={},n=(0,s.Z)(r,[["render",i]]);var d=n,u=a(4161),p=a(7178),m=a(4775);let c,h=0;const f=e=>{0===h&&(c=m.kN.service({target:e})),h++},g=()=>{h<=0||(h--,0===h&&c.close())},w=u.Z.create({baseURL:"https://devops.ftestblog.com/internal",timeout:1e5});w.interceptors.request.use((e=>{const t=window.sessionStorage.getItem("token");return f(),t&&(e.headers={Authorization:"token "+t}),e}),(e=>(g(),Promise.reject(e)))),w.interceptors.response.use((e=>{if(g(),200!=e.data.code){}return g(),e}),(e=>(p.z8.error("请求服务端接口错误："+e.message),g(),Promise.reject(e))));var _=w,v=a(2483),b=a(7139);const k={style:{float:"right"}},y={class:"mt-4",style:{width:"500px","margin-bottom":"15px",float:"left"}};function W(e,t,a,l,i,s){const r=(0,o.up)("el-button"),n=(0,o.up)("el-input"),d=(0,o.up)("el-tag"),u=(0,o.up)("el-table-column"),p=(0,o.up)("el-table"),m=(0,o.up)("SSHChannel"),c=(0,o.up)("ServerCreate"),h=(0,o.up)("ServerEdit");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",k,[(0,o.Wm)(r,{onClick:s.HeadrButton01,loading:i.HeadrButton01Button},{default:(0,o.w5)((()=>[(0,o.Uk)("一键同步")])),_:1},8,["onClick","loading"]),(0,o.Wm)(r,{onClick:t[0]||(t[0]=e=>i.HeadrButton02=!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("创建服务器")])),_:1})]),(0,o._)("div",y,[(0,o.Wm)(n,{modelValue:i.searchData,"onUpdate:modelValue":t[1]||(t[1]=e=>i.searchData=e),placeholder:"请输入要搜索的主机名",class:"input-with-select"},{prepend:(0,o.w5)((()=>[(0,o.Wm)(r,{icon:"Search",onClick:s.searchHostname},null,8,["onClick"])])),_:1},8,["modelValue"])]),(0,o._)("div",null,[(0,o.Wm)(p,{data:i.tableData,border:"",style:{width:"100%"},prop:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{label:"主机名",prop:"hostname"},{default:(0,o.w5)((e=>[(0,o._)("tr",null,[(0,o._)("td",null,[(0,o.Wm)(d,{class:"ml-2",type:"success"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(e.row.hostname),1)])),_:2},1024)])])])),_:1}),(0,o.Wm)(u,{label:"公网IP",prop:"public_ip"},{default:(0,o.w5)((e=>[(0,o._)("tr",null,[(0,o._)("td",null,[(0,o.Wm)(d,{class:"m1-2",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(e.row.public_ip),1)])),_:2},1024)])])])),_:1}),(0,o.Wm)(u,{label:"操作系统版本",prop:"os_version"}),(0,o.Uk)(" > "),(0,o.Wm)(u,{label:"磁盘",prop:"disk"}),(0,o.Wm)(u,{label:"内存",prop:"memory"},{default:(0,o.w5)((e=>[(0,o._)("tr",null,[(0,o._)("td",null,[(0,o.Wm)(d,{class:"m1-2",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(e.row.memory),1)])),_:2},1024)])])])),_:1}),(0,o.Wm)(u,{label:"内网IP",prop:"private_ip"},{default:(0,o.w5)((e=>[(0,o._)("tr",null,[(0,o._)("td",null,[(0,o.Wm)(d,{class:"m1-2",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(e.row.private_ip),1)])),_:2},1024)])])])),_:1}),(0,o.Wm)(u,{label:"类型",prop:"machine_type"},{default:(0,o.w5)((e=>[(0,o._)("tr",null,[(0,o._)("td",null,[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(e.row.machine_type),1)])),_:2},1024)])])])),_:1}),(0,o.Wm)(u,{label:"CPU数量",prop:"cpu_num"},{default:(0,o.w5)((e=>[(0,o._)("tr",null,[(0,o._)("td",null,[(0,o.Wm)(d,{class:"m1-2",type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(e.row.cpu_num),1)])),_:2},1024)])])])),_:1}),(0,o.Wm)(u,{label:"CPU参数",prop:"cpu_model"}),(0,o.Wm)(u,{label:"运行日期",prop:"put_shelves_date"}),(0,o.Wm)(u,{label:"操作",width:"400px"},{default:(0,o.w5)((e=>[((0,o.wg)(),(0,o.j4)(r,{size:"small",key:e.$index,onClick:t=>s.handleGetData(e.$index,e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("同步数据")])),_:2},1032,["onClick"])),(0,o.Wm)(r,{size:"small",onClick:t=>s.handleEdit(e.$index,e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("编辑")])),_:2},1032,["onClick"]),(0,o.Wm)(r,{size:"small",type:"danger",onClick:t=>s.handleDelete(e.$index,e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("删除")])),_:2},1032,["onClick"]),(0,o.Wm)(r,{size:"small",type:"primary",onClick:t=>s.handleWebssh(e.$index,e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("WebSSH")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,o.Wm)(m,{visible:i.sshDialogVisible,"onUpdate:visible":t[2]||(t[2]=e=>i.sshDialogVisible=e),row:i.ssh_channel_hostname,style:{"border-radius":"16px"}},null,8,["visible","row"]),(0,o.Wm)(c,{visible:i.HeadrButton02,"onUpdate:visible":t[3]||(t[3]=e=>i.HeadrButton02=e)},null,8,["visible"]),(0,o.Wm)(h,{visible:i.EditVisible,"onUpdate:visible":t[4]||(t[4]=e=>i.EditVisible=e),editdata:i.EditData},null,8,["visible","editdata"])])],64)}const U={ref:"xterm",class:"terminal"};function C(e,t,a,l,i,s){const r=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.j4)(r,{"model-value":a.visible,width:"60%",title:a.row,onClose:s.dialogClose,"close-on-click-modal":!1},{default:(0,o.w5)((()=>[(0,o._)("div",U,null,512)])),_:1},8,["model-value","title","onClose"])}var x=a(6537),V=a(7114),D={name:"SSHChannel",props:{visible:Boolean,row:""},data(){return{term:"",ws:""}},methods:{init(){this.term=new x.Terminal({fontSize:1,convertEol:!0,rendererType:"canvas",cursorBlink:!0,cursorStyle:"bar",theme:{background:"#060101",cursor:"help"}})},initSocket(){const e=new V.FitAddon;e.activate(this.term);const t="wss://devops.ftestblog.com/ws";this.ws=new WebSocket(`${t}/server/terminal/${this.row}/`),this.ws.onopen=()=>{this.term.open(this.$refs.xterm),this.term.focus(),e.fit()},this.ws.onmessage=e=>{const t=new window.FileReader;t.onload=()=>this.term.write(t.result),t.readAsText(e.data,"utf-8")},this.term.onData((e=>this.ws.send(JSON.stringify({data:e})))),this.term.onResize((({cols:e,rows:t})=>{this.ws.send(JSON.stringify({resize:[e,t]}))})),window.onresize=()=>e.fit(),this.ws.onclose=e=>{this.term.write("\r\nConnection is closed.\r\n")}},dialogClose(){this.ws.close(),this.term.dispose(),this.$emit("update:visible",!1),window.location.reload()}},watch:{visible(){this.init(),this.initSocket()}}};const A=(0,s.Z)(D,[["render",C],["__scopeId","data-v-4c74f41f"]]);var S=A;const $=e=>((0,o.dD)("data-v-34118187"),e=e(),(0,o.Cn)(),e),P={class:"tac el-container container"},E={class:"left"},z=$((()=>(0,o._)("div",{style:{padding:"10%",color:"#e8e8e8","text-align":"center"}}," DevOps ",-1))),j={class:"right"},O={class:"card-header"},B={style:{position:"absolute",right:"0",bottom:"0"}};function H(e,t,a,l,i,s){const r=(0,o.up)("el-icon"),n=(0,o.up)("el-menu-item"),d=(0,o.up)("location"),u=(0,o.up)("el-sub-menu"),p=(0,o.up)("el-menu"),m=(0,o.up)("el-avatar"),c=(0,o.up)("el-breadcrumb-item"),h=(0,o.up)("el-breadcrumb"),f=(0,o.up)("router-view"),g=(0,o.up)("el-card"),w=(0,o.up)("el-tag");return(0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("div",E,[z,(0,o.Wm)(p,{uniqueOpened:!0,"default-active":"2",class:"el-menu-vertical-demo",onOpen:e.handleOpen,onClose:e.handleClose,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:"","collapse-transition":!1},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$router.options.routes,(e=>((0,o.wg)(),(0,o.iD)(o.HY,{key:e},["/"==e.path?((0,o.wg)(),(0,o.j4)(n,{key:0,index:e.path},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.icon)))])),_:2},1024),(0,o._)("span",null,(0,b.zw)(e.name),1)])),_:2},1032,["index"])):"/login"==e.path?((0,o.wg)(),(0,o.j4)(n,{key:1,style:{display:"none"}})):e.children?e.children?((0,o.wg)(),(0,o.j4)(u,{key:3,index:e.path},{title:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.icon)))])),_:2},1024),(0,o._)("span",null,(0,b.zw)(e.name),1)])),default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.children,(e=>((0,o.wg)(),(0,o.j4)(n,{key:e,index:e.path},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1}),(0,o._)("span",null,(0,b.zw)(e.name),1)])),_:2},1032,["index"])))),128))])),_:2},1032,["index"])):(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(n,{key:2,index:e.path},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,b.zw)(e.name),1)])),_:2},1032,["index"]))],64)))),128))])),_:1},8,["onOpen","onClose"])]),(0,o._)("div",j,[(0,o.Wm)(p,{"default-active":"1",class:"el-menu-demo",mode:"horizontal",onSelect:e.handleSelect,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",style:{width:"100%",height:"4%"}},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{index:"2",style:{position:"absolute",right:"0"}},{title:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(i.username),1)])),_:1})])),default:(0,o.w5)((()=>[(0,o.Wm)(n,{onClick:s.Logout},{default:(0,o.w5)((()=>[(0,o.Uk)("退出")])),_:1},8,["onClick"]),(0,o.Wm)(n,{onClick:e.UpdatePassword},{default:(0,o.w5)((()=>[(0,o.Uk)("修改密码")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["onSelect"]),(0,o.Wm)(g,{class:"box-card"},{header:(0,o.w5)((()=>[(0,o._)("div",O,[(0,o.Wm)(h,{separator:"/"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(this.$route.matched,(e=>((0,o.wg)(),(0,o.j4)(c,null,{default:(0,o.w5)((()=>[(0,o._)("p",null,(0,b.zw)(e.name),1)])),_:2},1024)))),256))])),_:1})])])),default:(0,o.w5)((()=>[(0,o.Wm)(f)])),_:1}),(0,o._)("span",B,[(0,o.Wm)(w,{type:"info"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,b.zw)(i.nowDateTime),1)])),_:1})])])])}var T=a(2085),q={name:"IndexLayout",mounted(){this.getUsername()},components:{Serverdetails:te,AppDescribe:T["default"]},created(){this.currentTime()},data(){return{backgroud_color:"red",nowDateTime:"",username:""}},methods:{Logout(){window.sessionStorage.clear(),window.location.href="/login"},getTime(){let e=(new Date).getFullYear(),t=(new Date).getMonth()+1,a=(new Date).getDate(),l=(new Date).getHours(),o=(new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes(),i=(new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds();this.nowDateTime=e+"年 "+t+"月"+a+"日 "+l+":"+o+":"+i},currentTime(){setInterval(this.getTime,500)},getUsername(){this.username=window.sessionStorage.getItem("username")}}};const L=(0,s.Z)(q,[["render",H],["__scopeId","data-v-34118187"]]);var N=L;const R={class:"dialog-footer"};function I(e,t,a,l,i,s){const r=(0,o.up)("el-input"),n=(0,o.up)("el-form-item"),d=(0,o.up)("el-radio"),u=(0,o.up)("el-radio-group"),p=(0,o.up)("el-form"),m=(0,o.up)("el-button"),c=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.j4)(c,{"model-value":a.visible,title:"添加服务器",width:"30%",onClose:s.dialogClose,"close-on-click-modal":!1},{footer:(0,o.w5)((()=>[(0,o._)("span",R,[(0,o.Wm)(m,{onClick:s.dialogClose},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1},8,["onClick"]),(0,o.Wm)(m,{type:"primary",onClick:s.submit,loading:i.submiting},{default:(0,o.w5)((()=>[(0,o.Uk)("确定")])),_:1},8,["onClick","loading"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{model:i.form,"label-width":"120px",ref:"formRef",rules:i.formRules},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"主机名称",prop:"hostname"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.hostname,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.hostname=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"SSH地址",prop:"ipaddress"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.ipaddress,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.ipaddress=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"端口",prop:"port"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.port,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"用户名",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.username,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.username=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"认证方式",prop:"auth_choice"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.auth_choice,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.auth_choice=e),class:"ml-4",style:{float:"left"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"1",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("密码认证")])),_:1}),(0,o.Wm)(d,{label:"2",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("密钥认证")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==this.form.auth_choice?((0,o.wg)(),(0,o.j4)(n,{key:0,label:"请输入密码",prop:"auth_password"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.auth_password,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.auth_password=e),"show-password":""},null,8,["modelValue"])])),_:1})):2==this.form.auth_choice?((0,o.wg)(),(0,o.j4)(n,{key:1,label:"请添加密钥",prop:"auth_key"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.auth_key,"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.auth_key=e)},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["model-value","onClose"])}var Y={name:"ServerCreate",data(){return{submiting:!1,form:{hostname:"",ipaddress:"",username:"",auth_choice:"",auth_password:"",auth_key:"",port:22},formRules:{hostname:[{required:!0,message:"主机名称必须真实",trigger:"blur"}],ipaddress:[{required:!0,message:"请填写SSH地址",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],auth_choice:[{required:!0,message:"请选择认证方式",trigger:"blur"}],auth_password:[{required:!0,message:"请输入密码",trigger:"blur"}],auth_key:[{required:!0,message:"请上传密钥文件",trigger:"blur"}],port:[{required:!0,message:"请输入SSH端口",trigger:"blur"}]}}},props:{visible:Boolean},methods:{clearform(){this.form.hostname="",this.form.ipaddress="",this.form.username="",this.form.auth_choice="",this.form.auth_password="",this.form.auth_key=""},dialogClose(){this.$emit("update:visible",!1),this.clearform()},submit(){this.$refs.formRef.validate((e=>{this.submiting=!0,e?this.$axios.post("/server/api/server/",this.form).then((e=>{200==e.data.code?this.$axios.post("/server/gather_node/",{hostname:this.form.hostname}).then((e=>{200==e.data.code?(this.$message.success("创建完成,并且同步成功"),this.submiting=!1,this.dialogClose()):(this.$message.warning("创建完成,但同步失败,详情查看控制台"),console.log(e.data.message),this.submiting=!1,this.dialogClose())})):(this.$message.error("创建失败,详情查看控制台"),this.submiting=!1,console.log(e.data.message))})):this.$message.error("格式错误")}))}}};const Z=(0,s.Z)(Y,[["render",I]]);var F=Z;const M={class:"dialog-footer"};function K(e,t,a,l,i,s){const r=(0,o.up)("el-input"),n=(0,o.up)("el-form-item"),d=(0,o.up)("el-radio"),u=(0,o.up)("el-radio-group"),p=(0,o.up)("el-form"),m=(0,o.up)("el-button"),c=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.j4)(c,{"model-value":a.visible,title:"编辑服务器",width:"30%",onClose:s.dialogClose,"close-on-click-modal":!1},{footer:(0,o.w5)((()=>[(0,o._)("span",M,[(0,o.Wm)(m,{onClick:s.dialogClose},{default:(0,o.w5)((()=>[(0,o.Uk)("取消")])),_:1},8,["onClick"]),(0,o.Wm)(m,{type:"primary",onClick:s.submit,loading:i.submiting},{default:(0,o.w5)((()=>[(0,o.Uk)("修改")])),_:1},8,["onClick","loading"])])])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{model:i.form,"label-width":"120px",ref:"formRef",rules:i.formRules},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{label:"主机名称",prop:"hostname"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.hostname,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.hostname=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"SSH地址",prop:"ipaddress"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.ipaddress,"onUpdate:modelValue":t[1]||(t[1]=e=>i.form.ipaddress=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"端口",prop:"port"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.port,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"用户名",prop:"username"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.username,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.username=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(n,{label:"认证方式",prop:"auth_choice"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:i.form.auth_choice,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.auth_choice=e),class:"ml-4",style:{float:"left"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"1",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("密码认证")])),_:1}),(0,o.Wm)(d,{label:"2",size:"large"},{default:(0,o.w5)((()=>[(0,o.Uk)("密钥认证")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==i.form.auth_choice?((0,o.wg)(),(0,o.j4)(n,{key:0,label:"请输入密码",prop:"auth_password"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.auth_password,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.auth_password=e),"show-password":""},null,8,["modelValue"])])),_:1})):2==i.form.auth_choice?((0,o.wg)(),(0,o.j4)(n,{key:1,label:"请添加密钥",prop:"auth_key"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:i.form.auth_key,"onUpdate:modelValue":t[6]||(t[6]=e=>i.form.auth_key=e)},null,8,["modelValue"])])),_:1})):(0,o.kq)("",!0)])),_:1},8,["model","rules"])])),_:1},8,["model-value","onClose"])}var G={name:"ServerEdit",data(){return{visible:!1,form:{hostname:"",ipaddress:"",username:"",auth_choice:"",auth_password:"",auth_key:"",port:22},formRules:{hostname:[{required:!0,message:"主机名称必须真实",trigger:"blur"}],ipaddress:[{required:!0,message:"请填写SSH地址",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],auth_choice:[{required:!0,message:"请选择认证方式",trigger:"blur"}],auth_password:[{required:!0,message:"请输入密码",trigger:"blur"}],auth_key:[{required:!0,message:"请上传密钥文件",trigger:"blur"}],port:[{required:!0,message:"请输入SSH端口",trigger:"blur"}]},submiting:!1}},props:{visible:Boolean,editdata:String},beforeUpdate(){this.$axios.get("/server/NodeHostname/"+this.editdata.hostname+"/").then((e=>{this.form.hostname=e.data.data.hostname,this.form.ipaddress=e.data.data.ipaddress,this.form.username=e.data.data.username,this.form.auth_choice=e.data.data.auth_choice,this.form.auth_password=e.data.data.auth_password,this.form.auth_key=e.data.data.auth_key,this.form.port=e.data.data.port}))},methods:{clearform(){this.form.hostname="",this.form.ipaddress="",this.form.username="",this.form.auth_choice="",this.form.auth_password="",this.form.auth_key=""},dialogClose(){this.$emit("update:visible",!1),this.clearform()},submit(){this.$refs.formRef.validate((e=>{this.submiting=!0,e?this.$axios.post("/server/UpdateHostname/",this.form).then((e=>{200==e.data.code?this.$axios.post("/server/gather_node/",{hostname:this.form.hostname}).then((e=>{200==e.data.code?(this.$message.success("更新完成,并且同步成功"),this.submiting=!1,this.dialogClose(),setTimeout((()=>location.reload()),1e3)):(this.$message.warning("更新完成,但同步失败,详情查看控制台"),console.log(e.data.message),this.submiting=!1,this.dialogClose())})):(this.$message.error("更新失败,详情查看控制台"),this.submiting=!1,console.log(e.data.message))})):this.$message.error("格式错误")}))}}};const J=(0,s.Z)(G,[["render",K]]);var Q=J,X={name:"Serverdetails",data(){return{currentPage:1,pageSize:10,total:100,tableData:"",ssh_channel_hostname:"",sshDialogVisible:!1,searchData:"",HeadrButton01Button:!1,HeadrButton02:!1,EditData:"",EditVisible:!1}},components:{ServerCreate:F,SSHChannel:S,IndexLayout:N,ServerEdit:Q},mounted(){this.$axios.get("/server/api/serverdetais/").then((e=>{200==e.data.code&&(this.tableData=e.data.data)}))},methods:{handleDelete(e,t){console.log(t.hostname),this.$axios.delete("/server/api/serverdetais/"+t.id+"/").then((e=>{this.$axios.post("/server/NodeHostname/",{hostname:t.hostname}).then((e=>{this.$message.success("删除成功"),setTimeout((()=>location.reload()),1e3)}))}))},handleEdit(e,t){this.EditVisible=!0,this.EditData=t},handleWebssh(e,t){this.ssh_channel_hostname=t.hostname,this.sshDialogVisible=!0},handleGetData(e,t){this.$axios.post("/server/gather_node/",{hostname:t.hostname}).then((e=>{200==e.data.code?(this.$message.success("同步数据完成"),setTimeout((()=>location.reload()),1e3)):this.$message.error(e.data.message)}))},searchHostname(){this.$axios.get("/server/api/serverdetais/?search="+this.searchData).then((e=>{200==e.data.code||this.$message.warning(e.data.message),this.tableData=e.data.data}))},HeadrButton01(){this.HeadrButton01Button=!0,this.$axios.get("/server/synchronization/").then((e=>{200==e.data.code?(this.HeadrButton01Button=!1,this.$message.success(e.data.message),setTimeout((()=>location.reload()),1e3)):(this.HeadrButton01Button=!1,this.$message.error("部分机器同步失败,详情查看控制台"),console.log(e.data.message),setTimeout((()=>location.reload()),1e3))}))}}};const ee=(0,s.Z)(X,[["render",W]]);var te=ee;const ae=[{path:"/",name:"仪表盘",component:N,icon:"Histogram"},{path:"/server",name:"资产管理",component:N,icon:"Operation",children:[{path:"/server/Serverdetails",name:"服务器管理",component:te}]},{path:"/app",name:"应用管理",component:N,icon:"Menu",children:[{path:"/app/describe",component:()=>Promise.resolve().then(a.bind(a,2085)),name:"自定义应用"},{path:"/app/describe",component:()=>Promise.resolve().then(a.bind(a,2085)),name:"GIT应用发布"}]},{path:"/knowledge_ase",name:"文档管理",component:N,icon:"Document",children:[{path:"/knowledge_ase/txt",component:()=>a.e(720).then(a.bind(a,8720)),name:"共享文档"}]},{path:"/login",name:"登录页",component:()=>a.e(393).then(a.bind(a,1393))}],le=(0,v.p7)({history:(0,v.PO)("/"),routes:ae});le.beforeEach(((e,t,a)=>{if("/login"==e.path)return a();const l=window.sessionStorage.getItem("token");if(!l)return a("/login");a()})),le.afterEach((()=>{}));var oe=le,ie=a(8814),se=(a(4415),a(2748));const re=(0,l.ri)(d).use(oe);re.use(ie.Z);for(const[ne,de]of Object.entries(se))re.component(ne,de);re.config.globalProperties.$axios=_,re.mount("#app")},2085:function(e,t,a){a.r(t),a.d(t,{default:function(){return $}});var l=a(3396),o=a(7139);const i={style:{padding:"20px"}},s={align:"right"};function r(e,t,a,r,n,d){const u=(0,l.up)("el-text"),p=(0,l.up)("el-card"),m=(0,l.up)("el-row"),c=(0,l.up)("AppCreate"),h=(0,l.up)("AppEdit"),f=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(m,{gutter:12},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.appdata,(e=>((0,l.wg)(),(0,l.iD)("div",i,[((0,l.wg)(),(0,l.j4)(p,{shadow:"hover",onClick:t=>d.AppdesBtn(e.id),key:e.id,style:{"text-align":"center"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{tag:"b",type:"info",size:"large"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.app_name),1)])),_:2},1024)])),_:2},1032,["onClick"]))])))),256))])),_:1}),(0,l.Wm)(c,{visible:n.AppCreateBorder,"onUpdate:visible":t[0]||(t[0]=e=>n.AppCreateBorder=e)},null,8,["visible"]),(0,l.Wm)(h,{visible:n.AppEditBorder,"onUpdate:visible":t[1]||(t[1]=e=>n.AppEditBorder=e),AppEditData:n.AppEditData},null,8,["visible","AppEditData"]),(0,l._)("div",s,[(0,l.Wm)(f,{onClick:t[2]||(t[2]=e=>n.AppCreateBorder=!0),size:"large",class:"createbtn"},{default:(0,l.w5)((()=>[(0,l.Uk)("创建APP")])),_:1})])],64)}var n=a(9242);const d=e=>((0,l.dD)("data-v-177fc20f"),e=e(),(0,l.Cn)(),e),u=d((()=>(0,l._)("div",{class:"el-upload__tip"}," 支持任何文件,大小无上限，最多支持100个文件数量，需要考虑服务器宽带,如果是内网请忽略 ",-1))),p={class:"dialog-footer",style:{}};function m(e,t,a,o,i,s){const r=(0,l.up)("el-step"),d=(0,l.up)("el-steps"),m=(0,l.up)("el-input"),c=(0,l.up)("el-form-item"),h=(0,l.up)("Upload"),f=(0,l.up)("el-icon"),g=(0,l.up)("el-button"),w=(0,l.up)("el-upload"),_=(0,l.up)("el-form"),v=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.j4)(v,{"model-value":a.visible,title:"添加自定义应用",width:"40%",onClose:s.dialogClose,"close-on-click-modal":!1},{footer:(0,l.w5)((()=>[(0,l._)("span",p,[1==i.active?((0,l.wg)(),(0,l.j4)(g,{key:0,onClick:s.dialogClose},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1},8,["onClick"])):(0,l.kq)("",!0),i.active>1?((0,l.wg)(),(0,l.j4)(g,{key:1,onClick:t[5]||(t[5]=e=>s.dialogToggle("pre"))},{default:(0,l.w5)((()=>[(0,l.Uk)("上一步")])),_:1})):(0,l.kq)("",!0),i.active<3?((0,l.wg)(),(0,l.j4)(g,{key:2,onClick:t[6]||(t[6]=e=>s.dialogToggle("next"))},{default:(0,l.w5)((()=>[(0,l.Uk)("下一步")])),_:1})):(0,l.kq)("",!0),3==i.active?((0,l.wg)(),(0,l.j4)(g,{key:3,onClick:s.submit},{default:(0,l.w5)((()=>[(0,l.Uk)("确定")])),_:1},8,["onClick"])):(0,l.kq)("",!0)])])),default:(0,l.w5)((()=>[(0,l.Wm)(d,{active:i.active,"finish-status":"success",simple:"",style:{"margin-bottom":"10%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{title:"创建APP"}),(0,l.Wm)(r,{title:"上传部署材料"}),(0,l.Wm)(r,{title:"运行以及关闭指令"})])),_:1},8,["active"]),(0,l.Wm)(_,{model:i.form,"label-width":"120px",ref:"formRef",rules:i.formRules},{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(c,{label:"APP名称",prop:"AppName"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:i.form.AppName,"onUpdate:modelValue":t[0]||(t[0]=e=>i.form.AppName=e),style:{height:"35px",width:"80%"}},null,8,["modelValue"])])),_:1})],512),[[n.F8,1==i.active]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(w,{"file-list":i.form.fileList,"onUpdate:fileList":t[1]||(t[1]=e=>i.form.fileList=e),class:"upload-demo",action:i.uploadUrl,multiple:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"before-upload":e.beforeAvatarUpload,limit:100,"on-exceed":e.handleExceed},{tip:(0,l.w5)((()=>[u])),default:(0,l.w5)((()=>[(0,l.Wm)(g,{type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("上传安装脚本以及安装软件"),(0,l.Wm)(f,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(h)])),_:1})])),_:1})])),_:1},8,["file-list","action","on-preview","on-remove","before-remove","before-upload","on-exceed"])],512),[[n.F8,2==i.active]]),(0,l.wy)((0,l._)("div",null,[(0,l.Wm)(c,{label:"APP安装指令",prop:"AppDEPLOY"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:i.form.AppDEPLOY,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.AppDEPLOY=e),style:{height:"35px",width:"80%"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,{label:"APP运行指令",prop:"AppRUN"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:i.form.AppRUN,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.AppRUN=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(c,{label:"APP停止指令",prop:"AppSTOP"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{modelValue:i.form.AppSTOP,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.AppSTOP=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1})],512),[[n.F8,3==i.active]])])),_:1},8,["model","rules"])])),_:1},8,["model-value","onClose"])}var c={name:"AppCreate",data(){return{submiting:!1,active:1,uploadUrl:"",form:{AppName:"",AppRUN:"",AppSTOP:"",AppDEPLOY:"",fileList:""},formRules:{AppName:[{required:!0,message:"请填写APP名称",trigger:"blur"},{min:4,message:"APP名称长度不小于4个字符",trigger:"blur"}],AppDEPLOY:[{required:!0,message:"请输入APP安装指令",trigger:"blur"}],AppRUN:[{required:!0,message:"请输入APP运行指令",trigger:"blur"}],AppSTOP:[{required:!0,message:"请输入APP停止指令",trigger:"blur"}]}}},props:{visible:Boolean},mounted(){this.getUploadUrl(),this.$axios.get("/appdeploy/app/").then((e=>{200==e.data.code||this.$message.error(e.data.message)}))},methods:{getUploadUrl(){const e="https://devops.ftestblog.com/internal";this.uploadUrl=String(e+"/appdeploy/app/")},dialogClose(){this.$emit("update:visible",!1),this.active=1},dialogToggle(e){"pre"==e?this.active--<2&&(this.active=1):"next"==e&&this.active++>3&&(this.active=1)},submit(){this.$refs.formRef.validate((e=>{e?this.$axios.post("/appdeploy/app/",this.form).then((e=>{200==e.data.code?(this.$message.success(e.data.message),this.dialogClose(),setTimeout((()=>location.reload()),1e3)):this.$message.error(e.data.message)})):this.$message.error("请填写完整的信息！")}))}}},h=a(89);const f=(0,h.Z)(c,[["render",m],["__scopeId","data-v-177fc20f"]]);var g=f;const w=(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"APP详细信息")],-1),_={align:"right"},v=(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"部署服务器选择")],-1),b={align:"right"},k=(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"部署材料配置")],-1),y=(0,l._)("div",{class:"el-upload__tip"}," 支持任何文件,大小无上限，最多支持100个文件数量，需要考虑服务器宽带,如果是内网请忽略 ",-1),W={align:"right"},U=(0,l._)("div",{class:"card-header"},[(0,l._)("span",null,"已运行的服务器")],-1);function C(e,t,a,i,s,r){const n=(0,l.up)("el-tag"),d=(0,l.up)("el-button"),u=(0,l.up)("el-card"),p=(0,l.up)("el-option"),m=(0,l.up)("el-select"),c=(0,l.up)("el-input"),h=(0,l.up)("Upload"),f=(0,l.up)("el-icon"),g=(0,l.up)("el-upload"),C=(0,l.up)("el-table-column"),x=(0,l.up)("el-table"),V=(0,l.up)("el-drawer");return(0,l.wg)(),(0,l.j4)(V,{"model-value":a.visible,title:s.title,direction:"rtl",size:"50%",onClose:r.dialogClose,onOpen:r.dialogOpen},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(u,{class:"box-card",style:{margin:"5px"}},{header:(0,l.w5)((()=>[w])),default:(0,l.w5)((()=>[(0,l._)("p",null,[(0,l.Wm)(n,{type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("应用APP名称")])),_:1}),(0,l.Uk)(": "),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(s.appeditdata.app_name),1)])),_:1})]),(0,l._)("p",null,[(0,l.Wm)(n,{type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("应用部署指令")])),_:1}),(0,l.Uk)(": "),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(s.appeditdata.app_deploy),1)])),_:1})]),(0,l._)("p",null,[(0,l.Wm)(n,{type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("应用运行指令")])),_:1}),(0,l.Uk)(": "),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(s.appeditdata.app_start),1)])),_:1})]),(0,l._)("p",null,[(0,l.Wm)(n,{type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("应用停止指令")])),_:1}),(0,l.Uk)(": "),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(s.appeditdata.app_stop),1)])),_:1})]),(0,l._)("p",null,[(0,l.Wm)(n,{type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("应用创建时间")])),_:1}),(0,l.Uk)(": "),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(s.appeditdata.create_time),1)])),_:1})]),(0,l._)("p",null,[(0,l.Wm)(n,{type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)("配置更新时间")])),_:1}),(0,l.Uk)(": "),(0,l.Wm)(n,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(s.appeditdata.update_time),1)])),_:1})]),(0,l._)("div",_,[(0,l.Wm)(d,{type:"danger",plain:"",onClick:r.deleteApp},{default:(0,l.w5)((()=>[(0,l.Uk)("删除APP")])),_:1},8,["onClick"])])])),_:1}),(0,l.Wm)(u,{class:"box-card",style:{margin:"5px"}},{header:(0,l.w5)((()=>[v])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(m,{modelValue:s.selectValue,"onUpdate:modelValue":t[0]||(t[0]=e=>s.selectValue=e),placeholder:"请选择部署服的服务器"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.serverData,(e=>((0,l.wg)(),(0,l.j4)(p,{key:e.id,label:e.hostname,value:e.hostname},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,l._)("div",b,[(0,l.Wm)(d,{type:"primary",plain:"",onClick:r.deployBtn},{default:(0,l.w5)((()=>[(0,l.Uk)("自动部署")])),_:1},8,["onClick"])])])),_:1}),(0,l.Wm)(u,{class:"box-card",style:{margin:"5px"}},{header:(0,l.w5)((()=>[k])),default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)(c,{modelValue:s.form.id,"onUpdate:modelValue":t[1]||(t[1]=e=>s.form.id=e),disabled:"",style:{display:"none"}},null,8,["modelValue"]),(0,l._)("p",null,[(0,l.Uk)("应用APP名称: "),(0,l.Wm)(c,{modelValue:s.form.app_name,"onUpdate:modelValue":t[2]||(t[2]=e=>s.form.app_name=e),disabled:"",style:{width:"50%"}},null,8,["modelValue"])]),(0,l._)("p",null,[(0,l.Uk)("应用部署指令: "),(0,l.Wm)(c,{modelValue:s.form.app_deploy,"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.app_deploy=e),style:{width:"50%"}},null,8,["modelValue"])]),(0,l._)("p",null,[(0,l.Uk)("应用运行指令: "),(0,l.Wm)(c,{modelValue:s.form.app_start,"onUpdate:modelValue":t[4]||(t[4]=e=>s.form.app_start=e),style:{width:"50%"}},null,8,["modelValue"])]),(0,l._)("p",null,[(0,l.Uk)("应用停止指令: "),(0,l.Wm)(c,{modelValue:s.form.app_stop,"onUpdate:modelValue":t[5]||(t[5]=e=>s.form.app_stop=e),style:{width:"50%"}},null,8,["modelValue"])]),(0,l.Wm)(g,{"file-list":s.form.fileList,"onUpdate:fileList":t[6]||(t[6]=e=>s.form.fileList=e),class:"upload-demo",action:s.uploadUrl,multiple:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"before-upload":e.beforeAvatarUpload,limit:100,"on-exceed":e.handleExceed},{tip:(0,l.w5)((()=>[y])),default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("上传安装脚本以及安装软件"),(0,l.Wm)(f,{class:"el-icon--right"},{default:(0,l.w5)((()=>[(0,l.Wm)(h)])),_:1})])),_:1})])),_:1},8,["file-list","action","on-preview","on-remove","before-remove","before-upload","on-exceed"])]),(0,l._)("div",W,[(0,l.Wm)(d,{onClick:r.UpdateData,loading:s.isloading,type:"primary",plain:""},{default:(0,l.w5)((()=>[(0,l.Uk)("同步部署配置")])),_:1},8,["onClick","loading"])])])),_:1}),(0,l.Wm)(u,{class:"box-card",style:{margin:"5px"}},{header:(0,l.w5)((()=>[U])),default:(0,l.w5)((()=>[(0,l.Wm)(x,{data:s.serverData2,border:"",style:{width:"100%"},prop:""},{default:(0,l.w5)((()=>[(0,l.Wm)(C,{label:"主机名",prop:"hostname"},{default:(0,l.w5)((e=>[(0,l._)("tr",null,[(0,l._)("td",null,[(0,l.Wm)(n,{class:"ml-2",type:"success"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.app_hostname),1)])),_:2},1024)])])])),_:1}),(0,l.Wm)(C,{label:"公网IP",prop:"public_ip"},{default:(0,l.w5)((e=>[(0,l._)("tr",null,[(0,l._)("td",null,[(0,l.Wm)(n,{class:"m1-2",type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.public_ip),1)])),_:2},1024)])])])),_:1}),(0,l.Wm)(C,{label:"内网IP",prop:"private_ip"},{default:(0,l.w5)((e=>[(0,l._)("tr",null,[(0,l._)("td",null,[(0,l.Wm)(n,{class:"m1-2",type:"info"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.row.private_ip),1)])),_:2},1024)])])])),_:1}),(0,l.Wm)(C,{label:"操作",width:"500px"},{default:(0,l.w5)((e=>[(0,l.Wm)(d,{size:"small",type:"danger",onClick:t=>r.handleDelete(e.$index,e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("卸载应用 ")])),_:2},1032,["onClick"]),(0,l.Wm)(d,{size:"small",type:"success",onClick:t=>r.handleDelete(e.$index,e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("重启应用 ")])),_:2},1032,["onClick"]),(0,l.Wm)(d,{size:"small",type:"success",onClick:t=>r.handleDelete(e.$index,e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("运行应用 ")])),_:2},1032,["onClick"]),(0,l.Wm)(d,{size:"small",type:"info",onClick:t=>r.handleDelete(e.$index,e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("停止应用 ")])),_:2},1032,["onClick"]),(0,l.Wm)(d,{size:"small",onClick:t=>r.handleDelete(e.$index,e.row)},{default:(0,l.w5)((()=>[(0,l.Uk)("查询日志 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})])])),_:1},8,["model-value","title","onClose","onOpen"])}var x={name:"AppEdit",props:{visible:Boolean,AppEditData:Number},data(){return{appeditdata:"",title:"应用配置",serverData:"",serverData2:"",isloading:!1,uploadUrl:"",selectValue:"",form:{id:"",app_name:"",app_deploy:"",app_start:"",app_stop:"",fileList:""}}},mounted(){this.getUploadUrl(),this.getServerData()},methods:{getUploadUrl(){const e="https://devops.ftestblog.com/internal";this.uploadUrl=String(e+"/appdeploy/app/")},dialogClose(){this.$emit("update:visible",!1),this.selectValue=""},getAppEditData(){this.$axios.get("/appdeploy/api/app/"+this.AppEditData+"/").then((e=>{this.appeditdata=e.data,this.form.id=e.data.id,this.form.app_name=e.data.app_name,this.form.app_deploy=e.data.app_deploy,this.form.app_start=e.data.app_start,this.form.app_stop=e.data.app_stop}))},dialogOpen(){this.getAppEditData(),this.getServerData2()},getServerData(){this.$axios.get("/server/api/serverdetais/").then((e=>{200==e.data.code&&(this.serverData=e.data.data)}))},getServerData2(){this.$axios.get("/appdeploy/apprun/"+this.AppEditData+"/").then((e=>{this.serverData2=e.data.data}))},UpdateData(){this.isloading=!0,this.$axios.put("/appdeploy/app/"+this.form.id+"/",{app_name:this.form.app_name,app_start:this.form.app_start,app_deploy:this.form.app_deploy,app_stop:this.form.app_stop,fileList:this.form.fileList}).then((e=>{200==e.data.code?(this.$message.success("同步数据已完成"),setTimeout((()=>location.reload()),1e3)):(this.$message.error(e.data.message),this.isloading=!1)}))},deleteApp(){this.$axios.delete("/appdeploy/app/"+this.form.id+"/").then((e=>{200==e.data.code?this.$message.success("删除成功"):this.$message.error(e.data.message)}))},deployBtn(){const e={app_id:this.AppEditData,hostname:this.selectValue};this.$axios.post("/appdeploy/apprun/",e).then((e=>{this.$message.success(e.data.message),setTimeout((()=>location.reload()),1e3)}))},handleDelete(){this.$message.warning("暂未开发")}}};const V=(0,h.Z)(x,[["render",C]]);var D=V,A={name:"AppDescribe",data(){return{AppCreateBorder:!1,AppEditBorder:!1,AppEditData:"",appdata:""}},mounted(){this.$axios.get("/appdeploy/api/app/").then((e=>{this.appdata=e.data.data}))},methods:{AppdesBtn(e){this.AppEditBorder=!0,this.AppEditData=e}},components:{AppCreate:g,AppEdit:D}};const S=(0,h.Z)(A,[["render",r]]);var $=S}},t={};function a(l){var o=t[l];if(void 0!==o)return o.exports;var i=t[l]={exports:{}};return e[l].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,l,o,i){if(!l){var s=1/0;for(u=0;u<e.length;u++){l=e[u][0],o=e[u][1],i=e[u][2];for(var r=!0,n=0;n<l.length;n++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](l[n])}))?l.splice(n--,1):(r=!1,i<s&&(s=i));if(r){e.splice(u--,1);var d=o();void 0!==d&&(t=d)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,l){return a.f[l](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{393:"56ad6e02",720:"a3b5e566"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+".ab245df3.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="ftestweb:";a.l=function(l,o,i,s){if(e[l])e[l].push(o);else{var r,n;if(void 0!==i)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var p=d[u];if(p.getAttribute("src")==l||p.getAttribute("data-webpack")==t+i){r=p;break}}r||(n=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",t+i),r.src=l),e[l]=[o];var m=function(t,a){r.onerror=r.onload=null,clearTimeout(c);var o=e[l];if(delete e[l],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((function(e){return e(a)})),t)return t(a)},c=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),n&&document.head.appendChild(r)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,l,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css";var s=function(a){if(i.onerror=i.onload=null,"load"===a.type)l();else{var s=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.href||t,n=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");n.code="CSS_CHUNK_LOAD_FAILED",n.type=s,n.request=r,i.parentNode&&i.parentNode.removeChild(i),o(n)}};return i.onerror=i.onload=s,i.href=t,a?a.parentNode.insertBefore(i,a.nextSibling):document.head.appendChild(i),i},t=function(e,t){for(var a=document.getElementsByTagName("link"),l=0;l<a.length;l++){var o=a[l],i=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(i===e||i===t))return o}var s=document.getElementsByTagName("style");for(l=0;l<s.length;l++){o=s[l],i=o.getAttribute("data-href");if(i===e||i===t)return o}},l=function(l){return new Promise((function(o,i){var s=a.miniCssF(l),r=a.p+s;if(t(s,r))return o();e(l,r,null,o,i)}))},o={143:0};a.f.miniCss=function(e,t){var a={393:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=l(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}}(),function(){var e={143:0};a.f.j=function(t,l){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)l.push(o[2]);else{var i=new Promise((function(a,l){o=e[t]=[a,l]}));l.push(o[2]=i);var s=a.p+a.u(t),r=new Error,n=function(l){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var i=l&&("load"===l.type?"missing":l.type),s=l&&l.target&&l.target.src;r.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",r.name="ChunkLoadError",r.type=i,r.request=s,o[1](r)}};a.l(s,n,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,l){var o,i,s=l[0],r=l[1],n=l[2],d=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(n)var u=n(a)}for(t&&t(l);d<s.length;d++)i=s[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},l=self["webpackChunkftestweb"]=self["webpackChunkftestweb"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=a.O(void 0,[998],(function(){return a(1941)}));l=a.O(l)})();
//# sourceMappingURL=app.1baf2b4a.js.map